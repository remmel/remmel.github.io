<!DOCTYPE HTML>
<html>
<head>
<link rel="stylesheet" href="http://code.jquery.com/mobile/1.3.0/jquery.mobile-1.3.0.min.css" />
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script src="http://code.jquery.com/mobile/1.3.0/jquery.mobile-1.3.0.min.js"></script>
<script src="data.js"></script>
<script>
$(document).ready(function(){

	//console.log(getRoutes());
	console.log(getStops('CITY'));
	
	
});


function getRoutes(){
	return data.routes;
	//$( data. ).each(function( index ) {
  //console.log( index + ": " + $(this).text() );
//});
}



function getStops1(route_id){
	var stops = [];
	for(index in data.trips ){
		var raw = data.trips[index];
		if(raw.route_id === route_id){
			//console.log(raw.trip_id );
			for(index2 in data.stop_times){
				var row2 = data.stop_times[index2];
				if(row2.trip_id == raw.trip_id){
					//console.log(row2);
					stops.push(row2.stop_id);
				}
			};
			//console.log(stops);
			return stops;
		}
  			
	};
	
}

function getStops(route_id){
	var stops = [];
	var stop_ids = getStops1(route_id);
	for(i in stop_ids){
		var stop_id = stop_ids[i];
		for(j in data.stops){
			var stop = data.stops[j];
			if(stop.stop_id === stop_id){
				console.log(stop);
				stops.push(stop);
			}
		}
		
	}
	return stops;
}


</script>


</head>
<body>

</body>
</html>